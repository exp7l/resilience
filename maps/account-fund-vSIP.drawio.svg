<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1403px" height="1286px" viewBox="-0.5 -0.5 1403 1286" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-07-06T00:22:41.136Z&quot; agent=&quot;5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot; etag=&quot;LT-XA1TGwywnIGS5V9oe&quot; version=&quot;20.0.4&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;sK099LwJfF7bbQSy66-H&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="162" y="295" width="120" height="260" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 425px; margin-left: 163px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Account contract<br /><br />idea: an account is a transferable margin account and only release collateral when it meets collateral ratio requirement<br /><br />key: accountId</div></div></div></foreignObject><text x="222" y="429" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Account contract...</text></switch></g><rect x="552" y="295" width="120" height="260" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 425px; margin-left: 553px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Fund contract<br /><br />idea: a fund is a manged portfolio of margin accounts - equity is from accounts and liabilities is owed to synth holders<br /><br /> key: fundId, collateralType<br /></div></div></div></foreignObject><text x="612" y="429" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Fund contract...</text></switch></g><rect x="32" y="205" width="80" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 220px; margin-left: 33px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Contract view</div></div></div></foreignObject><text x="72" y="224" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Contract view</text></switch></g><path d="M 32 595 L 802 595" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 257 710 L 407 710 L 407 665.03 L 550.63 665.03" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 555.88 665.03 L 548.88 668.53 L 550.63 665.03 L 548.88 661.53 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 257 725 L 617 725.03 L 617 758.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 617 763.88 L 613.5 756.88 L 617 758.63 L 620.5 756.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 257 740 L 297 740 L 297 855.03 L 622.49 855.03 L 622.52 899.65" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 622.52 904.9 L 619.01 897.9 L 622.52 899.65 L 626.01 897.9 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="137" y="695" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 725px; margin-left: 138px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Account1</div></div></div></foreignObject><text x="197" y="729" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Account1</text></switch></g><rect x="557" y="635" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 665px; margin-left: 558px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Fund1</div></div></div></foreignObject><text x="617" y="669" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Fund1</text></switch></g><rect x="557" y="765" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 795px; margin-left: 558px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Fund2</div></div></div></foreignObject><text x="617" y="799" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Fund2</text></switch></g><rect x="557" y="905" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 935px; margin-left: 558px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Fund3</div></div></div></foreignObject><text x="617" y="939" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Fund3</text></switch></g><path d="M 257 920 L 277 920 L 277 890 L 457 890 L 457 676.91 L 549.91 676.88" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 555.16 676.88 L 548.16 680.38 L 549.91 676.88 L 548.16 673.38 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 257 935 L 550.63 935" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 555.88 935 L 548.88 938.5 L 550.63 935 L 548.88 931.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="137" y="905" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 935px; margin-left: 138px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Account2</div></div></div></foreignObject><text x="197" y="939" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Account2</text></switch></g><rect x="377" y="935" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 950px; margin-left: 378px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">delegate</div></div></div></foreignObject><text x="407" y="954" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">delegate</text></switch></g><rect x="340" y="595" width="135" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 133px; height: 1px; padding-top: 610px; margin-left: 341px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Domain view</div></div></div></foreignObject><text x="408" y="614" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Domain view</text></switch></g><ellipse cx="17" cy="782.5" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 17 790 L 17 815 M 17 795 L 2 795 M 17 795 L 32 795 M 17 815 L 2 835 M 17 815 L 32 835" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 842px; margin-left: 17px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Staker</div></div></div></foreignObject><text x="17" y="854" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Staker</text></switch></g><path d="M 617 1085 L 617 971.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 617 966.12 L 620.5 973.12 L 617 971.37 L 613.5 973.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="617" cy="1092.5" rx="7.5" ry="7.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 617 1100 L 617 1125 M 617 1105 L 602 1105 M 617 1105 L 632 1105 M 617 1125 L 602 1145 M 617 1125 L 632 1145" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1152px; margin-left: 617px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Liquidator</div></div></div></foreignObject><text x="617" y="1164" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Liqui...</text></switch></g><rect x="652" y="1025" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 1040px; margin-left: 653px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">liquidatePosition/Fund</div></div></div></foreignObject><text x="682" y="1044" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">liquidateP...</text></switch></g><path d="M 465 425 L 552 425" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><rect x="350" y="410" width="115" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 113px; height: 1px; padding-top: 425px; margin-left: 351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">auth call:<br />- deletegate<br /></div></div></div></foreignObject><text x="408" y="429" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">auth call:...</text></switch></g><path d="M 282 425 L 350 425" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><rect x="552" y="0" width="120" height="160" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 80px; margin-left: 553px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Market Manager contract<br /><br />idea: tracking (fund, marketId) debt balance<br /><br />key: fundId, marketId</div></div></div></foreignObject><text x="612" y="84" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Market Manager contr...</text></switch></g><path d="M 612 295 L 612 160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><rect x="162" y="0" width="120" height="165" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 83px; margin-left: 163px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">resUSD contract<br /><br />idea: ERC20 token, unit of account that debts and collaterals are denominated in</div></div></div></foreignObject><text x="222" y="86" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">resUSD contract...</text></switch></g><rect x="617" y="205" width="175" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 173px; height: 1px; padding-top: 220px; margin-left: 618px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">auth call:<br />- setLiquidity<br /><br />public calls:<br />- fundBalance(fundId, marketId) to get total fundBalance across markets</div></div></div></foreignObject><text x="705" y="224" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">auth call:...</text></switch></g><path d="M 912 425 L 678.37 425" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 673.12 425 L 680.12 421.5 L 678.37 425 L 680.12 428.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="912" y="295" width="120" height="260" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 425px; margin-left: 913px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Liquidator Bot contract<br /><br />idea: code not owned by protocol</div></div></div></foreignObject><text x="972" y="429" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Liquidator Bot contr...</text></switch></g><rect x="742" y="380" width="112" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 110px; height: 1px; padding-top: 395px; margin-left: 743px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">public:<br />- liqudatePosition<br />- liqudateFund</div></div></div></foreignObject><text x="798" y="399" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">public:...</text></switch></g><rect x="782" y="860" width="620" height="425" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 612px; height: 1px; padding-top: 850px; margin-left: 787px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 435px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1><span style="background-color: initial;">Fund3 (id: 3, type: resBTC)'s balance sheet  </span><br /></h1><div>{ </div><div>  <span style="background-color: initial;"> </span><span style="background-color: initial;">account1: {</span></div><div>    debtShares: 60,</div><div>    delegatedLiquidity (resUSD): 105</div><div>    (derived) collateralRatio:  105 / (25 * 4 resUSD per debtShare) // collateral ratio: 105%</div><div>  },</div><div>  account2: {</div><div>    debtShares: 40,</div><div>    delegatedLiquidity (resUSD): 200</div><div>    (derived) collateralRatio:  200 / (25 * 4 resUSD per debtShare)</div><div>  } </div><div>}</div><div><br /></div><div>Equity:</div><div><br /></div><div>105 + 200 resUSD</div><div><br /></div><div>---------------------------(collateral ratio: 305 / 200 = 152.5%)-----------------------------</div><div><br /></div><div><br /></div><div>Liabilities:</div><div><br /></div><div>50 shares valued at 4 resUSD per share @ block 420</div></div></div></div></foreignObject><text x="787" y="862" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Fund3 (id: 3, type: resBTC)'s balance sheet...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>